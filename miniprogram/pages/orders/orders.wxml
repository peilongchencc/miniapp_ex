<!--orders.wxml-->
<navigation-bar
  title="我的订单"
  back="{{true}}"
  color="white"
  background="linear-gradient(135deg, rgba(130, 180, 170, 0.85) 0%, rgba(100, 160, 150, 0.95) 100%)"
  bindback="goBack"
></navigation-bar>

<scroll-view class="scrollarea" scroll-y type="list" enhanced show-scrollbar="{{false}}">
  <!-- 空状态 -->
  <view class="empty-state" wx:if="{{orderList.length === 0}}">
    <image class="empty-image" src="/images/cart-empty.png" mode="aspectFit"></image>
    <text class="empty-text">暂无订单记录</text>
  </view>

  <!-- 订单列表 -->
  <view class="order-list" wx:else>
    <view class="order-card" wx:for="{{orderList}}" wx:key="id" data-id="{{item.id}}" bindtap="goToDetail">
      <view class="order-header">
        <text class="order-id">订单号: {{item.id}}</text>
        <text class="order-status status-{{item.status}}">{{statusMap[item.status]}}</text>
      </view>

      <!-- 商品列表（最多显示3个） -->
      <view class="order-items">
        <view class="order-item" wx:for="{{item.items}}" wx:for-item="product" wx:key="id" wx:if="{{index < 3}}">
          <image class="item-image" src="{{product.image}}" mode="aspectFill"></image>
          <view class="item-info">
            <text class="item-name">{{product.name}}</text>
            <text class="item-spec" wx:if="{{product.spec}}">{{product.spec}}</text>
          </view>
          <text class="item-quantity">x{{product.quantity}}</text>
        </view>
        <!-- 超过3个商品时显示查看更多 -->
        <view class="view-more" wx:if="{{item.items.length > 3}}">
          <text>查看全部 {{item.items.length}} 件商品</text>
          <text class="arrow">›</text>
        </view>
      </view>

      <view class="order-footer">
        <text class="order-time">下单时间: {{item.createTime}}</text>
        <view class="order-actions">
          <view class="action-btn reorder-btn" data-id="{{item.id}}" catchtap="handleReorder">
            一键复购
          </view>
        </view>
      </view>
    </view>
  </view>
</scroll-view>
