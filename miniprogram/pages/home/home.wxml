<!--home.wxml-->
<navigation-bar title="é¦–é¡µ" back="{{false}}" color="white" background="linear-gradient(135deg, rgba(130, 180, 170, 0.75) 0%, rgba(100, 160, 150, 0.85) 50%, rgba(90, 150, 145, 0.9) 100%)"></navigation-bar>

<scroll-view class="scrollarea" scroll-y type="list">
  <!-- 1. æœç´¢æ  -->
  <view class="search-section">
    <view class="search-bar">
      <image class="search-icon" src="/images/search-icon.png" mode="aspectFit"></image>
      <input 
        class="search-input" 
        placeholder="æœç´¢å•†å“ï¼Œå¦‚éª¨ç°ç›’ã€å¯¿è¡£" 
        placeholder-class="search-placeholder"
        value="{{searchKeyword}}"
        bindinput="onSearchInput"
        bindconfirm="onSearch"
      />
      <view class="search-btn" bindtap="onSearch">æœç´¢</view>
    </view>
  </view>

  <!-- 2. è½®æ’­å›¾ -->
  <view class="banner-section">
    <swiper 
      class="banner-swiper" 
      autoplay 
      circular 
      interval="{{4000}}" 
      duration="{{500}}"
      bindchange="onBannerChange"
    >
      <swiper-item wx:for="{{banners}}" wx:key="id">
        <view class="banner-item" bindtap="onBannerTap" data-id="{{item.id}}">
          <image class="banner-image" src="{{item.image}}" mode="aspectFill"></image>
          <view class="banner-title">{{item.title}}</view>
        </view>
      </swiper-item>
    </swiper>
    <view class="banner-dots">
      <view 
        wx:for="{{banners}}" 
        wx:key="id" 
        class="dot {{currentBanner === index ? 'active' : ''}}"
      ></view>
    </view>
  </view>

  <!-- 3. å•†å“åˆ†ç±»å…¥å£ -->
  <view class="category-section">
    <view class="category-grid">
      <view 
        wx:for="{{categories}}" 
        wx:key="id" 
        class="category-item"
        bindtap="onCategoryTap"
        data-id="{{item.id}}"
      >
        <view class="category-icon-wrapper">
          <text class="category-emoji">{{item.emoji}}</text>
        </view>
        <text class="category-name">{{item.name}}</text>
      </view>
    </view>
  </view>

  <!-- 4. çƒ­é”€/æ¨èå•†å“ -->
  <view class="product-section">
    <view class="section-header">
      <text class="section-title">çƒ­é”€æ¨è</text>
      <text class="section-more" bindtap="onViewMoreHot">æŸ¥çœ‹æ›´å¤š ></text>
    </view>
    <view class="product-grid">
      <view 
        wx:for="{{hotProducts}}" 
        wx:key="id" 
        class="product-item"
        bindtap="onProductTap"
        data-id="{{item.id}}"
        data-name="{{item.name}}"
        data-image="{{item.image}}"
        data-base-price="{{item.basePrice}}"
      >
        <image class="product-image" src="{{item.image}}" mode="aspectFill"></image>
        <view class="product-info">
          <text class="product-name">{{item.name}}</text>
          
          <!-- ä»·æ ¼åŒºåŸŸï¼šå½“å‰ä»· + åˆ’çº¿ä»· -->
          <view class="product-price-row">
            <text class="product-price">Â¥{{item.userPrice ? item.userPrice : item.basePrice}}</text>
            <text wx:if="{{item.userPrice}}" class="original-price">Â¥{{item.basePrice}}</text>
          </view>
          
          <text class="product-sales">å·²å”®{{item.sales}}ä»¶</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 5. æœåŠ¡ç‰¹è‰² -->
  <view class="service-section">
    <view class="section-header">
      <text class="section-title">æœåŠ¡ä¿éšœ</text>
    </view>
    <view class="service-grid">
      <view wx:for="{{services}}" wx:key="id" class="service-item">
        <text class="service-icon">{{item.icon}}</text>
        <text class="service-title">{{item.title}}</text>
        <text class="service-desc">{{item.desc}}</text>
      </view>
    </view>
  </view>

  <!-- 6. è”ç³»æ–¹å¼ -->
  <view class="contact-section">
    <view class="section-header">
      <text class="section-title">è”ç³»æˆ‘ä»¬</text>
    </view>
    <view class="contact-list">
      <view class="contact-item" bindtap="onCallPhone">
        <text class="contact-icon">ğŸ“</text>
        <view class="contact-info">
          <text class="contact-label">æœåŠ¡çƒ­çº¿</text>
          <text class="contact-value">{{contact.phone}}</text>
        </view>
        <text class="contact-arrow">></text>
      </view>
      <view class="contact-item" bindtap="onContactService">
        <text class="contact-icon">ğŸ’¬</text>
        <view class="contact-info">
          <text class="contact-label">åœ¨çº¿å®¢æœ</text>
          <text class="contact-value">{{contact.workTime}}</text>
        </view>
        <text class="contact-arrow">></text>
      </view>
      <view class="contact-item" bindtap="onViewAddress">
        <text class="contact-icon">ğŸ“</text>
        <view class="contact-info">
          <text class="contact-label">é—¨åº—åœ°å€</text>
          <text class="contact-value">{{contact.address}}</text>
        </view>
        <text class="contact-arrow">></text>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨ç•™ç™½ -->
  <view class="footer-space"></view>
</scroll-view>

<!-- æ‚¬æµ®å®¢æœæŒ‰é’® -->
<view class="float-service" bindtap="onContactService">
  <view class="float-icon-wrapper">
    <view class="float-headset"></view>
  </view>
  <text class="float-text">å®¢æœ</text>
  <view class="float-pulse"></view>
</view>
